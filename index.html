<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Visualización de Calificaciones</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background-color: #000;
      color: #fff;
      margin: 0;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h2 {
      font-size: 1.75rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    p.intro {
      font-size: 0.95rem;
      color: #ccc;
      max-width: 600px;
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 2rem;
    }

    button {
      background: #859900;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 0.5rem 1rem;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    button:hover {
      background: #6c7d00;
    }

    canvas {
      max-width: 100%;
      width: 100%;
      max-height: 400px;
    }

    .footer {
      margin-top: 2rem;
      font-size: 0.75rem;
      color: #aaa;
      text-align: center;
    }
  </style>
</head>
<body>
  <h2>Visualización de Datos de Calificaciones</h2>
  <p class="intro">
    Tenemos las siguientes 50 calificaciones de un examen. ¡Vamos a explorarlas!
  </p>

  <div class="buttons">
    <button onclick="generateChart('histogram')">Histograma</button>
    <button onclick="generateChart('polygon')">Polígono de Frecuencias</button>
    <button onclick="generateChart('ogive')">Ojiva</button>
    <button onclick="generateChart('pie')">Gráfico de Pastel</button>
  </div>

  <canvas id="freq-chart" width="600" height="400"></canvas>

  <div class="footer">Hecho por Jorge Enrique</div>

  <script>
    const gradesData = [68, 84, 75, 82, 68, 90, 62, 88, 76, 93, 73, 79, 88, 73, 60, 93, 71, 59, 85, 75, 61, 65, 75, 87, 74, 62, 95, 78, 63, 72, 66, 78, 82, 75, 94, 77, 69, 74, 68, 60, 96, 78, 89, 61, 75, 95, 60, 79, 83, 71];
    let currentChart = null;

    function getFrequencyDistribution(data) {
      const classes = { "50-59": 0, "60-69": 0, "70-79": 0, "80-89": 0, "90-99": 0 };
      const labels = Object.keys(classes);

      data.forEach(grade => {
        if (grade < 60) classes["50-59"]++;
        else if (grade < 70) classes["60-69"]++;
        else if (grade < 80) classes["70-79"]++;
        else if (grade < 90) classes["80-89"]++;
        else classes["90-99"]++;
      });

      const frequencies = Object.values(classes);
      let cumulative = 0;
      const cumulativeFreq = frequencies.map(f => cumulative += f);

      return { labels, frequencies, cumulative: cumulativeFreq };
    }

    function generateChart(type) {
      const ctx = document.getElementById("freq-chart").getContext("2d");
      if (currentChart) currentChart.destroy();

      const dist = getFrequencyDistribution(gradesData);

      const chartConfig = {
        type: type === "histogram" ? "bar" :
              type === "polygon" ? "line" :
              type === "ogive" ? "line" : "pie",
        data: {
          labels: type === "ogive" ? ["49", ...dist.labels.map(l => l.split("-")[1])] : dist.labels,
          datasets: [{
            label: type === "ogive" ? "Ojiva (Frecuencia acumulada)" : "Frecuencia",
            data: type === "ogive" ? [0, ...dist.cumulative] : dist.frequencies,
            backgroundColor: type === "pie"
              ? ['#2aa198', '#268bd2', '#859900', '#cb4b16', '#d33682']
              : 'rgba(75, 192, 192, 0.6)',
            borderColor: type === "polygon" || type === "ogive" ? "#fff" : undefined,
            borderWidth: 2,
            fill: type !== "pie"
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: (type !== "pie") ? { y: { beginAtZero: true } } : {}
        }
      };

      currentChart = new Chart(ctx, chartConfig);
    }
  </script>
</body>
</html>
